{{ require_css(get_asset_url('../../event-registration.css')) }}
{{ require_js(get_asset_url('../../vendor.js'), 'footer') }}
{{ require_js(get_asset_url('../../event-registration.js'), 'footer') }}

{%- macro outputColorIfSet(property, color, css_selector) -%}
  {%- if color.color -%}
    #hs_cos_wrapper_{{ name }} {{css_selector}} {
      {{property}}: rgba({{color.color|convert_rgb}}, {{color.opacity/100}});
    }
  {%- endif -%}
{%- endmacro -%}

<div class="event-registration">
  <script type="application/json"
    data-module-instance="{{ name }}"
    data-portal-id="{{ portal_id }}">
    {%- set moduleData = module -%}
    {%- do moduleData.update({
      'event_page': slug,
      'my_event_page': content_by_id(module.my_event_page).absoluteUrl
    })-%}
    {{ moduleData|tojson }}
  </script>
  {% require_css %}
  <style>
    {% if module.customize_styles %}
      {{outputColorIfSet('background-color', module.filter_menu_styles.background_color_filter_bar, '.filter-bar')}}
      {{outputColorIfSet('color', module.filter_menu_styles.font_color_filter_bar, '.filter-bar')}}

      {{outputColorIfSet('background-color', module.card_styles.background_color_card, '.event-card')}}
      {{outputColorIfSet('color', module.card_styles.font_color_card, '.event-card__title')}}
      {{outputColorIfSet('color', module.card_styles.font_color_card, '.event-card__column')}}

      {{outputColorIfSet('background-color', module.event_form.form_title.background_color_form_title, '.event-details__registration--title')}}
      {{outputColorIfSet('color', module.event_form.form_title.font_color_form_title, '.event-details__registration--title')}}

      {{outputColorIfSet('background-color', module.event_form.form_fields.background_color_form_fields, '.event-  details__registration__input')}}

      {{outputColorIfSet('background-color', module.event_form.form_submit_button.background_color_form_button, '.event-button')}}

      {{outputColorIfSet('background-color', module.event_form.form_background.background_color_form, '.event-details__registration')}}
    {% endif %}
  </style>
  {% end_require_css %}
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="event-registration__module--{{ name }}"></div>
</div>
